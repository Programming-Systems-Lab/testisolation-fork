\section{Coping With the Impact}
\label{sec:cope}

Test dependence can cause non-trivial repercussions
to both developers and downstream testing techniques.
When test dependence arises, test prioritization,
selection, and parallelization techniques
should respect the potential dependence and keep the
test execution results consistent.

This section presents a algorithm to alleviate the
impact of test dependence on test suite manipulation techniques.
The algorithm generates a new test order based on the dependent tests
present in the output of the orders generated by the techniques we studied.
For the purpose of this paper we focused on three particular test suite
manipulation techniques. They are test prioritization, selection
and parallelization.
However since this algorithm is a postproccessing step that is not
deeply integrated into the techniques we studied, this algorithm
should also be applicable to any other test suite manipulation technique.
With our algorithm incorporated into the techniques we studied
the execution results of the test orders generated by such techniques
will now reveal the same execution results as in the original test suite order.


The three techniques start out by ordering the tests into a list 
based on the coverage and order passed to the technique.
Coverages used in our experiments are statement
and function level while orders used in our experiments are absolute,
relative, random, original order and time order. The list is ordered
in that the tests with the highest number of coverage elements
is ordered to be the first element of the list followed by the test with
the second highest number of coverage elements as the second
element of the list and so on. For more information regarding how the coverage
and order affects the ordering of tests refer to Section~\ref{sec:background}.
The three techniques then utilizes the function generateDependentFreeOrder
with the ordered list of tests to generate a new order that respects test dependence.
The algorithm is shown in Figure~\ref{fig:processDT} and is used purely as a
postprocessing step by the techniques we studied.
The generateDependentFreeOrder algorithm creates a empty list (line 1)
then goes through each test in $\mathit{T}$ and tries to add each
test to the new list (line 2-4), taking into account its dependences
when adding a test. This newly generated list has the first test
that is added to it as the first element of the list followed by the
test that is added after the first test as the second element of the list
and so on.


In order to add a test to the new list, generateDependentFreeOrder calls
the recursive function, addTest. The function is recursive
because test $\mathit{a}$ may depend on test $\mathit{b}$ and test
$\mathit{b}$ may depend on test $\mathit{c}$... Since it's
undetermined how many tests may need to be added before or after
test $\mathit{a}$, this is addressed by making addTest
a recursive function. addTest first checks whether the test
being added is already contained in the new list, if it is then the
test will be ignored (line 1). Otherwise the function retrieves all
tests that when executed after this test will cause this test to be
dependent by calling the helper function getDependentAfterTests (line 2). 
Once all of those tests are retrieved they are added to the new list first
by recursively calling itself with them (line 3-5). Once all
the tests that needs to come before this test has been added to
the new list, the test itself is added to the list (line 6). The
function then retrieves the list of tests that when executed
before this test will cause it to be dependent by calling
getDependentBeforeTests (line 7). Finally the function
concludes by recursively adding all of those tests to the
new list (line 8-10).     


%First, we present an automated
%technique to identify the root cause of test dependence
%(Section~\ref{sec:coperoot}). 
%Second, to alleviate the
%impact on downstream testing techniques, we present a family
%of techniques to enhance existing test prioritization,
%test selection, and test parallelization techniques (Section~\ref{sec:copeenhance}).



%\subsection{Enhancing Downstream Testing Techniques}
%\label{sec:copeenhance}

\input{enhance}


%\subsection{Evaluating Enhanced Testing Techniques}

%\label{sec:evaluation}

%\subsubsection{Subject Programs}

%use the same subject programs

%\subsubsection{Methodology}

%\subsubsection{Understanding Dependence Root Causes}

%\subsubsection{Dependance-Aware Test Prioritization}

%\subsubsection{Dependance-Aware Test Selection}

%\subsubsection{Dependance-Aware Test Parallelization}


\subsection{Discussion}

